---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "fptcloud_managed_kubernetes_engine_v1 Resource - terraform-provider-fptcloud"
subcategory: ""
description: |-
  Manage managed FKE clusters.
---

# fptcloud_managed_kubernetes_engine_v1

Manage managed FKE clusters.

## Example Usage

### Basic Usage

```hcl
resource "fptcloud_managed_kubernetes_engine_v1" "example" {
  vpc_id       = "your-vpc-id"
  cluster_name = "example-cluster"
  network_id   = "your-network-id"
  k8s_version  = "1.28.0"

  pools {
    name             = "worker-pool-1"
    storage_profile  = "your-storage-profile"
    worker_type      = "your-worker-type"
    worker_disk_size = 40
    scale_min        = 1
    scale_max        = 3
    worker_base      = true
  }
}
```

### With Hibernation Schedules

```hcl
resource "fptcloud_managed_kubernetes_engine_v1" "example_with_hibernation" {
  vpc_id       = "your-vpc-id"
  cluster_name = "example-cluster-with-hibernation"
  network_id   = "your-network-id"
  k8s_version  = "1.28.0"

  # Hibernation schedules configuration
  hibernation_schedules = [
    {
      start    = "0 23 * * 2,4"  # Every Tuesday and Thursday at 11 PM
      end      = "0 7 * * 2,4"   # Every Tuesday and Thursday at 7 AM
      location = "Asia/Bangkok"
    },
    {
      start    = "0 22 * * 6"    # Every Saturday at 10 PM
      end      = "0 8 * * 0"     # Every Sunday at 8 AM
      location = "Asia/Bangkok"
    }
  ]

  pools {
    name             = "worker-pool-1"
    storage_profile  = "your-storage-profile"
    worker_type      = "your-worker-type"
    worker_disk_size = 40
    scale_min        = 1
    scale_max        = 3
    worker_base      = true
  }
}
```

### With Auto Upgrade Version

```hcl
resource "fptcloud_managed_kubernetes_engine_v1" "example_with_hibernation" {
  vpc_id       = "your-vpc-id"
  cluster_name = "example-cluster-with-hibernation"
  network_id   = "your-network-id"
  k8s_version  = "1.28.0"

  # Enable auto upgrade verion configuration

  is_enable_auto_upgrade = true
  auto_upgrade_expression = [ "0 0 * * *" ]
  auto_upgrade_timezone = "Asia/Saigon"

  # Disable auto upgrade verion configuration

  is_enable_auto_upgrade = false

  pools {
    name             = "worker-pool-1"
    storage_profile  = "your-storage-profile"
    worker_type      = "your-worker-type"
    worker_disk_size = 40
    scale_min        = 1
    scale_max        = 3
    worker_base      = true
  }
}
```

## Argument Reference

The following arguments are supported:

### Required Arguments

* `vpc_id` - (Required) VPC ID
* `cluster_name` - (Required) Cluster name
* `network_id` - (Required) Subnet ID

### Optional Arguments

* `k8s_version` - (Optional) Kubernetes version
* `purpose` - (Optional) Cluster purpose
* `pod_network` - (Optional) Pod network (subnet ID)
* `pod_prefix` - (Optional) Pod network (prefix)
* `service_network` - (Optional) Service network (subnet ID)
* `service_prefix` - (Optional) Service prefix (prefix)
* `k8s_max_pod` - (Optional) Max pods per node
* `network_type` - (Optional) Network type
* `network_overlay` - (Optional) Whether to encapsulate pod traffic between different subnets or same subnet
* `edge_gateway_id` - (Optional) Edge gateway ID, in the format of urn:vcloud:gateway:<uuid>
* `internal_subnet_lb` - (Optional) Internal subnet for load balancer
* `edge_gateway_name` - (Optional) Edge gateway name
* `is_enable_auto_upgrade` - (Optional) Whether to enable auto-upgrade
* `auto_upgrade_expression` - (Optional) Auto-upgrade cron expressions
* `auto_upgrade_timezone` - (Optional) Timezone for auto-upgrade
* `is_running` - (Optional) Whether the cluster is running
* `hibernation_schedules` - (Optional) List of hibernation schedules for the cluster

### Hibernation Schedules Block

The `hibernation_schedules` block supports the following:

* `start` - (Required) Cron expression for when hibernation should start
* `end` - (Required) Cron expression for when hibernation should end
* `location` - (Required) Timezone for the hibernation schedule (e.g., Asia/Bangkok)

### Cluster Autoscaler Block

The `cluster_autoscaler` block supports the following:

* `is_enable_auto_scaling` - (Optional) Enable cluster autoscaling
* `scale_down_delay_after_add` - (Optional) Delay after adding a node before scale down (seconds)
* `scale_down_delay_after_delete` - (Optional) Delay after deleting a node before scale down (seconds)
* `scale_down_delay_after_failure` - (Optional) Delay after scale down failure (seconds)
* `scale_down_unneeded_time` - (Optional) Time a node should be unneeded before scale down (seconds)
* `scale_down_utilization_threshold` - (Optional) Utilization threshold for scale down
* `scan_interval` - (Optional) Interval between autoscaler scans (seconds)
* `expander` - (Optional) Autoscaler expander strategy

### Cluster Endpoint Access Block

The `cluster_endpoint_access` block supports the following:

* `type` - (Required) Type of cluster endpoint access (public, private, or mixed)
* `allow_cidr` - (Optional) Allowed CIDR blocks for cluster endpoint access

### Pools Block

The `pools` block supports the following:

* `name` - (Required) Pool name
* `storage_profile` - (Required) Pool storage profile
* `worker_type` - (Required) Worker flavor ID
* `worker_disk_size` - (Required) Worker disk size
* `scale_min` - (Required) Minimum number of nodes for autoscaling
* `scale_max` - (Required) Maximum number of nodes for autoscaling
* `worker_base` - (Required) Whether this is the base worker pool
* `network_name` - (Optional) Subnet name
* `network_id` - (Optional) Subnet ID
* `container_runtime` - (Optional) Container runtime
* `tags` - (Optional) Tags for the worker pool
* `kv` - (Optional) Label for the pool
* `vgpu_id` - (Optional) Virtual GPU ID
* `max_client` - (Optional) Maximum number of clients
* `gpu_sharing_client` - (Optional) GPU sharing client
* `driver_installation_type` - (Optional) Driver installation type
* `gpu_driver_version` - (Optional) GPU driver version
* `is_enable_auto_repair` - (Optional) Whether to enable auto-repair

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The ID of the cluster

## Import

Managed Kubernetes Engine clusters can be imported using the format `vpcId/clusterId`:

```bash
terraform import fptcloud_managed_kubernetes_engine_v1.example vpc-123/cluster-456
```

## Notes

- Hibernation schedules use cron expressions for the `start` and `end` fields
- The `location` field should be a valid timezone identifier (e.g., "Asia/Bangkok", "UTC", "America/New_York")
- When hibernation schedules are configured, the cluster will automatically hibernate and wake up according to the specified schedule
- Hibernation schedules can be updated after cluster creation
- The cluster must be in a running state to apply hibernation schedules
